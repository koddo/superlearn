<!doctype html>
<html lang="en">
    <head>
        <meta charset='utf-8'>
        <link href="/css/site.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <div id="content">


# preview


# header
## subheader

hello _world_, **wonderful**, $a+b$, $x_{1,2}={\frac{ -b\pm \sqrt{\textcolor{red}{b^{2}-4ac}} } {2a}}$


`$$x_{1,2}={\frac{ -b\pm \sqrt{\textcolor{red}{b^{2}-4ac}} } {2a}}$$` =>

$$x_{1,2}={\frac{ -b\pm \sqrt{\textcolor{red}{b^{2}-4ac}} } {2a}}$$

            
$$
\begin{equation}
\left[
{\bf X} + {\rm a} \ \geq\
\underline{\hat a} \sum_i^N \lim_{x \rightarrow k} \delta C
\right]
\end{equation}
$$

$$
\begin{align*}
n! = 1 \cdot 2 \cdot \ldots \cdot &\frac{n}{2} \cdot \ldots \cdot n \geqslant \\
\geqslant \ &\frac{n}{2} \cdot \ldots \cdot \frac{n}{2} = \left(\frac{n}{2}\right)^{\textcolor{red}{\frac{n}{2}}}
\end{align*}
$$

# problems with the dollar sign

price is $100

price is $100, not $200

price is \$100, not \$200

            
`foo $a, n, b$` => foo $a, n, b$

`foo $a, \$, b$` => foo $a, \$, b$

`foo \\(a, \$, b\\)` => foo \\(a, \$, b\\)


# chemistry only works with double slashes `\\( \\)`

`\\( \ce{CO2 + C -> 2 CO} \\)` => \\( \ce{CO2 + C -> 2 CO} \\)

`$ \ce{CO2 + C -> 2 CO} $` => $ \ce{CO2 + C -> 2 CO} $


# double escaping problem

This is run before passing to marked: <script>console.log("hello")</script>

This is what data from server looks like, see page source:
            
&lt;script&gt;alert(&quot;hey&quot;)&lt;/script&gt;

```
&lt;script&gt;alert(&quot;hey&quot;)&lt;/script&gt;
```


</div>


        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.6/marked.min.js"></script> -->
        <!-- https://github.com/chjj/marked/issues/722#issuecomment-190934293 -->
        <!-- https://github.com/Feder1co5oave/marktex/tree/production -->
        <!-- this is a fork that works kinda ok with mathjax -->
        <script src="https://cdn.rawgit.com/Feder1co5oave/marktex/production/lib/marked.js"></script>
        
        <script type="text/x-mathjax-config">
         MathJax.Ajax.config.path["mhchem"] =
             "https://cdnjs.cloudflare.com/ajax/libs/mathjax-mhchem/3.2.0";
         MathJax.Hub.Config({ TeX: { extensions: ["color.js", "[mhchem]/mhchem.js"] },
                              tex2jax: {
                                  inlineMath: [ ['$','$'], ['\\(','\\)'] ],
                                  displayMath: [ ['$$','$$'], ['\[','\]'] ]
                              },
                              showProcessingMessages: false });
        </script>
        <script type="text/javascript" async
                src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script>


        <script>
         function decodeEntities(encodedString) {
             var textArea = document.createElement('textarea');
             textArea.innerHTML = encodedString;
             return textArea.value;
         }
         document.getElementById('content').innerHTML =
             marked(decodeEntities(document.getElementById('content').innerHTML), {sanitize: true});
         console.log(decodeEntities(document.getElementById('content').innerHTML));
        </script>
    </body>
</html>

